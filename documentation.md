# Документация по скрипту rgr1_03.py: Поиск минимального покрывающего четырехугольника с GUI

## 1. Обзор назначения кода

Данный Python-скрипт предназначен для решения задачи вычислительной геометрии: нахождения четырех различных точек из первого заданного множества, которые образуют выпуклый четырехугольник минимальной площади, полностью покрывающий все точки из второго заданного множества.

Ключевые особенности скрипта:
* **Графический интерфейс пользователя (GUI)**: Взаимодействие с пользователем для выбора источника данных осуществляется через окно, созданное с помощью библиотеки Tkinter.
* **Варианты входных данных**: Пользователь может выбрать один из пяти вариантов:
    1.  Случайная генерация наборов точек.
    2.  Четыре предопределенных набора точек с различными характеристиками (наличие/отсутствие решения, количество точек).
* **Визуализация результатов**:
    * Текстовое сообщение о результате (найден ли четырехугольник, его вершины и площадь) выводится в диалоговом окне (messagebox).
    * Графическое представление обоих множеств точек и найденного четырехугольника (если он существует) отображается с использованием библиотеки Matplotlib.
* **Консольный вывод**: В консоль дублируется информация о выбранном режиме, параметрах генерации (если применимо) и деталях найденного решения. Пользователь не взаимодействует с консолью для управления программой.
* **Простота кода**: Скрипт написан с упором на простоту, избегая использования классов и сложных конструкций `try-except` в основной логике.

## 2. Описание компонентов (функций)

Скрипт состоит из нескольких групп функций: геометрические вспомогательные функции, функция генерации случайных точек, основная функция поиска, функции для GUI и обработки выбора.

### 2.1. Геометрические вспомогательные функции

Эти функции предоставляют базовые инструменты для геометрических вычислений.

* **`cross_product(p1, p2, p3)`**
    * **Назначение**: Вычисляет векторное произведение векторов `(p2-p1)` и `(p3-p1)`. Используется для определения ориентации трех точек (левый поворот, правый поворот или коллинеарность).
    * **Параметры**: `p1`, `p2`, `p3` – кортежи `(x, y)`, представляющие точки.
    * **Возвращает**: Числовое значение векторного произведения.

* **`distance_sq(p1, p2)`**
    * **Назначение**: Вычисляет квадрат евклидова расстояния между двумя точками. Это позволяет сравнивать расстояния без более затратной операции извлечения квадратного корня.
    * **Параметры**: `p1`, `p2` – кортежи `(x, y)`.
    * **Возвращает**: Квадрат расстояния.

* **`convex_hull_graham_scan(points)`**
    * **Назначение**: Строит минимальную выпуклую оболочку для заданного набора точек с использованием алгоритма сканирования Грэхема.
    * **Параметры**: `points` – список точек `(x, y)`.
    * **Возвращает**: Список вершин выпуклой оболочки, упорядоченных против часовой стрелки.

* **`polygon_area(vertices)`**
    * **Назначение**: Вычисляет площадь многоугольника по формуле шнурков (Shoelace formula), используя упорядоченный список его вершин.
    * **Параметры**: `vertices` – список вершин `(x, y)` многоугольника.
    * **Возвращает**: Площадь многоугольника.

* **`is_inside_convex_polygon(point, polygon_vertices)`**
    * **Назначение**: Проверяет, находится ли заданная точка `point` внутри выпуклого многоугольника `polygon_vertices` или на его границе.
    * **Параметры**: `point` – проверяемая точка `(x, y)`; `polygon_vertices` – список вершин выпуклого многоугольника.
    * **Возвращает**: `True`, если точка внутри или на границе, иначе `False`.

### 2.2. Функция для генерации случайных точек

* **`generate_random_points(num_points, min_coord, max_coord)`**
    * **Назначение**: Генерирует указанное количество случайных точек в заданном диапазоне координат.
    * **Параметры**: `num_points` – количество генерируемых точек; `min_coord`, `max_coord` – минимальное и максимальное значения для координат x и y.
    * **Возвращает**: Список сгенерированных точек `(x, y)`.

### 2.3. Основная логика поиска четырехугольника

* **`find_min_area_covering_quadrilateral(set1, set2, output_messages_list)`**
    * **Назначение**: Является ядром алгоритма. Перебирает все комбинации из 4 точек множества `set1`, формирует из них выпуклые четырехугольники, проверяет покрытие всех точек из `set2` и находит четырехугольник с минимальной площадью.
    * **Параметры**: `set1` – первое множество точек (кандидаты в вершины); `set2` – второе множество точек (должны быть покрыты); `output_messages_list` – список для сбора информационных сообщений для пользователя.
    * **Возвращает**: Кортеж `(optimal_quad_vertices, min_area)`, где `optimal_quad_vertices` – список вершин найденного четырехугольника (или `None`), а `min_area` – его площадь (или `float('inf')`).

### 2.4. Функции для GUI и обработки выбора

* **`process_choice(choice_index, root_window)`**
    * **Назначение**: Эта функция вызывается при нажатии кнопки в окне выбора Tkinter. Она определяет, какой набор данных использовать (случайный или один из предопределенных), подготавливает данные, вызывает `find_min_area_covering_quadrilateral` для выполнения вычислений, собирает результаты и управляет отображением диалогового окна с результатами и графика Matplotlib.
    * **Параметры**: `choice_index` – индекс выбранного варианта (0 для случайных, 1-4 для предопределенных); `root_window` – ссылка на главное окно Tkinter, чтобы его можно было закрыть.
    * **Глобальные переменные**: Использует `set1_points_global` и `set2_points_global` для передачи данных о точках в часть кода, отвечающую за отрисовку графика Matplotlib, так как окно Tkinter к этому моменту уже закрыто.

* **`create_choice_window()`**
    * **Назначение**: Создает и отображает главное окно Tkinter с пятью кнопками для выбора пользователем источника данных. Каждая кнопка привязана к вызову `process_choice` с соответствующим индексом.
    * **Взаимодействие**: После нажатия на кнопку окно выбора закрывается, и запускается обработка выбранного варианта.

### 2.5. Точка входа в программу

* **Блок `if __name__ == '__main__':`**
    * **Назначение**: Определяет точку входа при запуске скрипта.
    * **Действия**: Инициализирует глобальные переменные `set1_points_global` и `set2_points_global` (используемые для передачи данных между Tkinter и Matplotlib частями) и вызывает `create_choice_window()` для отображения GUI выбора данных.

## 3. Примеры использования и порядок работы

1.  **Запуск скрипта**:
    * Убедитесь, что у вас установлены необходимые библиотеки: `matplotlib` и `tkinter` (обычно входит в стандартную поставку Python).
    * Запустите скрипт из командной строки: `python rgr1_03.py`

2.  **Окно выбора данных**:
    * При запуске появится окно "Выбор набора данных" с пятью кнопками:
        * "Случайные точки"
        * "Предопределенный 1 (основной)"
        * "Предопределенный 2 (другой)"
        * "Предопределенный 3 (нет решения)"
        * "Предопределенный 4 (мало точек в М1)"

3.  **Выбор варианта**:
    * Нажмите на одну из кнопок. Окно выбора закроется.

4.  **Обработка и результаты**:
    * **Консоль**: В консоли отобразится информация о выбранном режиме и, если применимо, о параметрах сгенерированных точек, а также детали найденного решения (вершины, площадь) или сообщение об ошибке.
    * **Диалоговое окно (Messagebox)**: Появится информационное окно с обобщенными результатами: найден ли четырехугольник, его вершины и площадь, или сообщение об ошибке/предупреждении.
    * **График Matplotlib**: Отобразится график с двумя множествами точек и найденным четырехугольником (если он существует).
        * Множество 1: синие кружки.
        * Множество 2: красные крестики.
        * Оптимальный четырехугольник: светло-зеленая заливка, зеленая граница, вершины подписаны.

**Предопределенные наборы данных (доступны через кнопки):**

* **Предопределенный 1 (основной)**: Набор, для которого ожидается нахождение решения.
    * `set1`: `[(0, 0), (10, 0), (10, 10), (0, 10), (1, 5), (5, 1), (9, 5), (5, 9), (2,2), (8,2), (8,8), (2,8)]`
    * `set2`: `[(3, 3), (7, 7), (4, 6), (6, 4)]`
* **Предопределенный 2 (другой)**: Другой набор, для которого также ожидается решение.
    * `set1`: `[(0,0), (1,3), (4,4), (5,1), (2,-1), (3,0)]`
    * `set2`: `[(2,2), (3,1)]`
* **Предопределенный 3 (нет решения)**: Точки из Множества 2 находятся далеко, решение не должно быть найдено.
    * `set1`: `[(0,0), (1,0), (0,1), (1,1)]`
    * `set2`: `[(5,5)]`
* **Предопределенный 4 (мало точек в М1)**: В Множестве 1 недостаточно точек для формирования четырехугольника.
    * `set1`: `[(0,0), (1,0), (0,1)]`
    * `set2`: `[(0.5,0.5)]`

**Случайная генерация:**
* При выборе "Случайные точки" генерируется:
    * `NUM_RANDOM_SET1` (по умолчанию 15) точек для Множества 1.
    * `NUM_RANDOM_SET2` (по умолчанию 5) точек для Множества 2.
    * Координаты в диапазоне `COORD_MIN` (0) до `COORD_MAX` (100).
    Эти параметры можно изменить непосредственно в коде функции `process_choice`.
